"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parsePackageDiff = void 0;
const gitPatchParser = require("git-patch-parser");
function parsePackageDiff(packageName, patch) {
    const diffs = gitPatchParser.parseUnifiedDiff(patch)
        .reduce((memo, it) => memo.concat(it.lines), []);
    const pkgString = `\"${packageName}\":`;
    const before = diffs.find((diff) => {
        return diff.type === "removed" && diff.content.trim().startsWith(pkgString);
    });
    const after = diffs.find((diff) => {
        return diff.type === "added" && diff.content.trim().startsWith(pkgString);
    });
    const regex = /(?<=")(.*?)(?=")/g;
    return [
        before ? before.content.trim().replace(pkgString, "").trim().match(regex)[0] : null,
        after ? after.content.trim().replace(pkgString, "").trim().match(regex)[0] : null
    ];
}
exports.parsePackageDiff = parsePackageDiff;
//# sourceMappingURL=parsePackageDiff.js.map